!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.app=e():(t.app=t.app||{},t.app.utils=e())}(self,(function(){return(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(){var t,e,n,o,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function a(t){t instanceof jQuery?m(t):o=t}function i(e){return t=e,this}function c(t){return e=t,this}function s(t){return n=t,this}function l(t){return o=t,this}function d(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET";r&&(o=r),o.method=a,o.dataType||(o.dataType="json"),$.ajax(o).done((function(e){t&&t(e)})).fail((function(t){e?e(t):console.log(t.responseText)})).always((function(t){n&&n(t)}))}function u(t){d(t,"GET")}function f(t){d(t,"POST")}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET";t.dataType="json",d(t,e)}function g(t){p(t,"POST")}function m(t){var e=t.serialize();return l({url:t.attr("action"),data:e}),this}return a(r),Object.freeze({done:i,fail:c,complete:s,params:l,send:d,get:u,post:f,json:p,postJson:g,form:m})}function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{control:"submit",unblock:!1};if(!(this instanceof o?this.constructor:void 0))return new o(t,r);var a=$("#".concat(t)),i=r,c=app.controls.item("".concat(t,"-submit"));a.on("afterValidateAttribute",(function(t,e,n){var o=app.controls.item(e.id);if(o.helperMessage){var r=n.length>0?n[0]:"";o.valid=0==n.length,o.helperMessage.error=r}})),a.on("beforeSubmit",(function(){c.disabled="submit"==i.control;var t=n(a);return"all"==i.control&&app.controls.groupEnabled(a.attr("id"),!1),t.done((function(t){"success"===t.status?e(t):"model-error"===t.status&&function(){var e=!1,n=app.controls.item("app-snackbar");for(var o in t.message)if(t.message[o].forEach((function(t){n.add(t)})),""!==o.trim()){var r=app.controls.item(o);e||(r.focus(),e=!0),r.valid=!1,r.helperMessage.error=t.message[o][0]}n.showMessage()}()})).complete((function(t){var e=i.unblock||!("success"===t.status);"all"==i.control?app.controls.groupEnabled(a.attr("id"),e):c.disabled=!e})).post(),!1})),o.prototype.onSuccess=function(t){e=t},Object.defineProperty(o.prototype,"id",{get:function(){return a.attr("id")},set:function(t){this.id!=t&&a.attr("id",t)},enumerable:!0,configurable:!0})}function r(t){if(!(this instanceof r?this.constructor:void 0))return new r(t);var e,o,a=this,i=t,c="",s=app.controls.item(t),l=s.root.querySelectorAll(".mdc-data-table__pagination");if(l.length>0)var d=l[0].querySelector(".mdc-data-table__pagination-total"),u=l[0].querySelector(".mdc-data-table__pagination-navigation");var f=s.root.querySelector("tbody"),p=app.controls.item(t+"-rows"),g=!0;p&&p.root.addEventListener("MDCSelect:change",(function(t){g?y(_(document.location.href,"per-page",t.detail.value),!0):g=!0}));var m=s.root.querySelectorAll(".mdc-data-table__header-cell--with-sort");function v(t){if(m.length>0){var e=new URL(t).searchParams.get("sort");if(e){var n=e.replace(/^-/,"");m.forEach((function(t){t.getAttribute("data-column-id")===n?(t.classList.add("mdc-data-table__header-cell--sorted"),"-"===e[0]?(t.setAttribute("aria-sort","descending"),t.classList.add("mdc-data-table__header-cell--sorted-descending")):(t.setAttribute("aria-sort","ascending"),t.classList.remove("mdc-data-table__header-cell--sorted-descending"))):(t.classList.remove("mdc-data-table__header-cell--sorted"),t.classList.remove("mdc-data-table__header-cell--sorted-descending"),t.setAttribute("aria-sort","none"))}))}}}function b(){if(l.length>0){var t=l[0].querySelectorAll(".mdc-data-table__pagination-navigation button");t.length>0&&t.forEach((function(t){var e=t.querySelector("a");e.addEventListener("click",(function(t){t.preventDefault()})),t.addEventListener("click",(function(){y(e.href,!0)}))}))}}function h(t){f.classList.add("mdc-data-table__content-reload"),setTimeout((function(){if(l.length>0){if(d){var e=t.summury;o=e.begin,r=e.end,a=e.totalCount,(i=d.querySelectorAll("b")).length>0&&(i[0].innerHTML="".concat(o,"-").concat(r),i[1].innerHTML=a)}u&&(!1===(n=t.nav)?u.innerHTML="":(u.innerHTML=n,b())),p&&p.value!=t.pageSize.toString()&&(g=!1,p.value=t.pageSize.toString())}var n,o,r,a,i;f.innerHTML=t.items,f.classList.remove("mdc-data-table__content-reload")}),150)}function y(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c=t,s.showProgress(),n({url:t}).done((function(n){"success"===n.status?(void 0!==e&&e(n),r?window.history.pushState({link:t,id:a.id},"",t):v(t),h(n.data)):"error"===n.status&&(app.controls.item("app-snackbar").showMessage(n.message),s.hideProgress())})).complete((function(t){void 0!==o&&o(t),s.hideProgress()})).get()}function _(t,e,n){var o=new URL(t);return o.searchParams.set(e,n),o.href}b(),m.length>0&&m.forEach((function(t){t.addEventListener("click",(function(){var e=0==c.length?t.getAttribute("link"):c,n=t.getAttribute("data-column-id");"ascending"===t.getAttribute("aria-sort")&&(n="-"+n),y(e=_(e,"sort",n),!0)}))})),r.prototype.reload=function(t){y(t,!1)},r.prototype.onSuccess=function(t){e=t},r.prototype.onComplete=function(t){o=t},Object.defineProperty(r.prototype,"id",{get:function(){return i+"-processing"},enumerable:!0,configurable:!0})}return t.r(e),t.d(e,{DataTableProcessing:()=>r,FormProcessing:()=>o,ajax:()=>n}),window.onpopstate=function(t){},e})()}));